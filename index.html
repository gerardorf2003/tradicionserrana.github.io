<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tradici√≥n Serrana | Mercado Local</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        :root { --verde: #2d5a27; --crema: #f4f1ea; }
        body { background-color: var(--crema); font-family: 'Segoe UI', sans-serif; }
        .navbar { background-color: var(--verde); }
        .product-card { border: none; border-radius: 15px; height: 100%; transition: 0.3s; overflow: hidden; }
        .product-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.15); }
        .card-img-top { height: 220px; object-fit: cover; }
        .badge-loc { background: #e9ecef; color: #495057; border-radius: 20px; padding: 5px 12px; font-size: 0.8rem; }
    </style>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark shadow">
    <div class="container">
        <a class="navbar-brand fw-bold" href="#">üèîÔ∏è Tradici√≥n Serrana</a>
        <a href="vendedor.html" class="btn btn-outline-light btn-sm">Vender Producto</a>
    </div>
</nav>

<header class="py-5 text-center bg-white border-bottom mb-5">
    <h1 class="display-5 fw-bold text-success">Productos de Nuestra Sierra</h1>
    <p class="text-muted">Apoya directamente a los productores locales</p>
</header>

<div class="container mb-5">
    <div class="row row-cols-1 row-cols-md-3 g-4" id="contenedor-productos">
        </div>
</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
    import { getFirestore, collection, onSnapshot, query, orderBy } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js";

    const firebaseConfig = {
     apiKey: "AIzaSyDTeO88X2kS5Y35VifPK-Xp9aojdHwCEqc",
  authDomain: "tradicion-serrana-9eddb.firebaseapp.com",
  projectId: "tradicion-serrana-9eddb",
  storageBucket: "tradicion-serrana-9eddb.firebasestorage.app",
  messagingSenderId: "1029895692370",
  appId: "1:1029895692370:web:eaa51b96aeebc030ff3f8b",
  measurementId: "G-0ZKWW4YNX0"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const contenedor = document.getElementById('contenedor-productos');

    const q = query(collection(db, "productos"), orderBy("createdAt", "desc"));

    onSnapshot(q, (snapshot) => {
        contenedor.innerHTML = '';
        snapshot.forEach((doc) => {
            const p = doc.data();
            contenedor.innerHTML += `
                <div class="col">
                    <div class="card product-card shadow-sm">
                        <img src="${p.imagenUrl}" class="card-img-top" alt="${p.nombre}">
                        <div class="card-body d-flex flex-column">
                            <div class="d-flex justify-content-between mb-2">
                                <h5 class="fw-bold mb-0">${p.nombre}</h5>
                                <span class="badge-loc">üìç ${p.ubicacion}</span>
                            </div>
                            <p class="text-muted small flex-grow-1">${p.descripcion}</p>
                            <hr>
                            <a href="mailto:${p.vendedorEmail}" class="btn btn-success w-100">Contactar Vendedor</a>
                        </div>
                    </div>
                </div>`;
        });
    });
</script>
</body>

</html>
