<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tradici√≥n Serrana | Mercado Local</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
:root { 
    --verde-serrano: #2d5a27; 
    --verde-oscuro: #1b3d1a;
    --crema: #fdfcf9; 
    --tierra: #8b5a2b;
}

body { 
    font-family: 'Poppins', sans-serif; 
    background-color: var(--crema); 
    color: #333;
}

.navbar { 
    background: linear-gradient(135deg, var(--verde-serrano), var(--verde-oscuro)) !important; 
}

.hero-section {
    background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), 
                url('https://images.unsplash.com/photo-1495539406979-bf61750d38ad?auto=format&fit=crop&w=1470&q=80');
    background-size: cover;
    background-position: center;
    height: 70vh;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    color: white;
}

.hero-section h1 {
    font-family: 'Playfair Display', serif;
    font-size: 3.8rem;
    letter-spacing: 3px;
}

.nav-tabs { 
    border: none; 
    justify-content: center; 
    margin-top: -30px; 
    position: relative; 
    z-index: 10; 
}

.nav-tabs .nav-link {
    background: white;
    border: none;
    border-radius: 30px;
    padding: 12px 30px;
    margin: 0 10px;
    color: var(--verde-serrano);
    font-weight: 600;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

.nav-tabs .nav-link.active {
    background-color: var(--tierra) !important;
    color: white !important;
    transform: translateY(-5px);
}

#carouselInicio img {
    height: 450px;
    object-fit: cover;
}

.product-card { 
    border-radius: 25px; 
    transition: all 0.4s ease; 
    background: white;
    border: 1px solid #eee;
    overflow: hidden;
}

.product-card:hover { 
    transform: translateY(-8px);
    box-shadow: 0 20px 40px rgba(0,0,0,0.1); 
}

.card-img-top { 
    height: 280px; 
    object-fit: cover; 
}

.btn-contact {
    background: linear-gradient(135deg, var(--verde-serrano), var(--verde-oscuro));
    color: white;
    border-radius: 30px;
    padding: 12px;
    font-size: 0.85rem;
    font-weight: 600;
    border: none;
}

footer {
    background: linear-gradient(135deg, #1b3d1a, #2d5a27);
}
</style>
</head>

<body>

<nav class="navbar navbar-dark shadow-sm py-3">
<div class="container">
<a class="navbar-brand fw-bold fs-3" href="#">üèîÔ∏è Tradici√≥n Serrana</a>
<a href="vendedor.html" class="btn btn-outline-light rounded-pill px-4">Acceso Vendedores</a>
</div>
</nav>

<header class="hero-section">
<div>
<h1>TRADICI√ìN SERRANA</h1>
<p class="lead mb-4">Un pedazo de nuestra tierra en cada producto.</p>
<button class="btn btn-light btn-lg rounded-pill px-4 fw-bold"
        data-bs-toggle="tab"
        data-bs-target="#catalogo">
Explorar Productos
</button>
</div>
</header>

<div class="container">

<ul class="nav nav-tabs" id="myTab">
<li class="nav-item">
<button class="nav-link active" data-bs-toggle="tab" data-bs-target="#inicio">Inicio</button>
</li>
<li class="nav-item">
<button class="nav-link" data-bs-toggle="tab" data-bs-target="#catalogo">Ver Cat√°logo</button>
</li>
</ul>

<div class="tab-content mt-5">

<div class="tab-pane fade show active" id="inicio">

<div id="carouselInicio" class="carousel slide mb-5 shadow rounded-5 overflow-hidden"
     data-bs-ride="carousel"
     data-bs-interval="3500">

<div class="carousel-inner">
<div class="carousel-item active">
<img src="imagen1.jpg" class="d-block w-100">
</div>
<div class="carousel-item">
<img src="imagen2.jpg" class="d-block w-100">
</div>
<div class="carousel-item">
<img src="imagen3.jpg" class="d-block w-100">
</div>
</div>

<button class="carousel-control-prev" type="button" data-bs-target="#carouselInicio" data-bs-slide="prev">
<span class="carousel-control-prev-icon"></span>
</button>

<button class="carousel-control-next" type="button" data-bs-target="#carouselInicio" data-bs-slide="next">
<span class="carousel-control-next-icon"></span>
</button>

</div>
</div>

<div class="tab-pane fade" id="catalogo">

<h2 class="text-center mb-4" style="font-family: 'Playfair Display', serif;">Nuestro Cat√°logo</h2>

<div class="row mb-4">
<div class="col-md-6 mx-auto">
<input type="text" id="buscador" class="form-control rounded-pill p-3 shadow-sm" placeholder="Buscar producto...">
</div>
</div>

<div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-5" id="contenedor-productos"></div>

</div>
</div>
</div>

<footer class="py-5 text-white mt-5 text-center">
<div class="container">
<h5>üèîÔ∏è Tradici√≥n Serrana</h5>
<p class="small">Apoyando el comercio local y el talento de nuestra tierra.</p>
<p class="small opacity-75">¬© 2026 Todos los derechos reservados</p>
</div>
</footer>

<!-- MODAL CONTACTO -->
<div class="modal fade" id="modalContacto" tabindex="-1">
<div class="modal-dialog modal-dialog-centered">
<div class="modal-content rounded-4">
<div class="modal-header border-0">
<h5 class="modal-title fw-bold">Datos del Vendedor</h5>
<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
</div>
<div class="modal-body text-center">
<h5 id="modalNombreProducto" class="fw-bold mb-3"></h5>
<p><strong>Email:</strong></p>
<p id="modalEmail" class="text-muted"></p>
<p><strong>Tel√©fono:</strong></p>
<p id="modalTelefono" class="text-muted"></p>
<div id="botonWhatsappContainer" class="mt-3"></div>
</div>
</div>
</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
import { getFirestore, collection, onSnapshot, query, orderBy } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js";

  const firebaseConfig = {
            apiKey: "AIzaSyDTeO88X2kS5Y35VifPK-Xp9aojdHwCEqc",
  authDomain: "tradicion-serrana-9eddb.firebaseapp.com",
  projectId: "tradicion-serrana-9eddb",
  storageBucket: "tradicion-serrana-9eddb.firebasestorage.app",
  messagingSenderId: "1029895692370",
  appId: "1:1029895692370:web:eaa51b96aeebc030ff3f8b",
  measurementId: "G-0ZKWW4YNX0"
    };

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const contenedor = document.getElementById('contenedor-productos');
const buscador = document.getElementById("buscador");

const q = query(collection(db, "productos"), orderBy("createdAt", "desc"));

onSnapshot(q, (snapshot) => {
contenedor.innerHTML = '';
snapshot.forEach((doc) => {
const p = doc.data();
contenedor.innerHTML += `
<div class="col">
<div class="card product-card h-100">
<img src="${p.imagenUrl}" class="card-img-top">
<div class="card-body p-4">
<h5 class="fw-bold">${p.nombre}</h5>
<p class="text-muted small">${p.descripcion}</p>
<div class="d-grid">
<button class="btn btn-contact"
onclick="abrirModalContacto('${p.nombre}','${p.vendedorEmail}','${p.telefono || ''}')">
Contactar Vendedor
</button>
</div>
</div>
</div>
</div>`;
});
});

buscador.addEventListener("input", () => {
const texto = buscador.value.toLowerCase();
const cards = document.querySelectorAll(".product-card");
cards.forEach(card => {
const nombre = card.querySelector("h5").innerText.toLowerCase();
card.parentElement.style.display = nombre.includes(texto) ? "" : "none";
});
});

window.abrirModalContacto = function(nombre, email, telefono) {
document.getElementById("modalNombreProducto").innerText = nombre;
document.getElementById("modalEmail").innerText = email;
document.getElementById("modalTelefono").innerText = telefono || "No disponible";

const container = document.getElementById("botonWhatsappContainer");
container.innerHTML = "";

const esMovil = /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);

if (telefono && esMovil) {
container.innerHTML = `
<a href="https://wa.me/${telefono.replace(/\D/g,'')}"
target="_blank"
class="btn btn-success rounded-pill px-4">
Abrir WhatsApp
</a>`;
}

const modal = new bootstrap.Modal(document.getElementById("modalContacto"));
modal.show();
};
</script>

</body>
</html>
